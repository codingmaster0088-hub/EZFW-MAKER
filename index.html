<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Load Master App</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
  <!-- Link to External CSS -->
  <link rel="stylesheet" href="style.css">
  <!-- Required library for JPG generation -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</head>
<body>

  <!-- Login Screen -->
  <div class="center-box" id="welcome">
    <div class="welcome-content">
      <h1>WELCOME LOAD MASTER</h1>
      <h3>INVENTED BY RADOAN RASEL</h3>
      <div class="login-area">
        <input type="text" id="controllerName" placeholder="LOAD CONTROLLER NAME">
        <br>
        <button onclick="login()" class="login-btn">LOG IN</button>
      </div>
    </div>
  </div>

  <!-- Main App Screen -->
  <div class="form-container" id="form-page">
    
    <!-- Header with Logout -->
    <div class="app-header">
       <div class="user-info">
         <span>OFFICER: <b id="displayControllerName"></b></span>
       </div>
       <button onclick="logout()" class="logout-btn">LOG OUT</button>
    </div>

    <div class="grid top-grid">
      <select id="time" onchange="saveDataLocally(); this.className='has-value'">
        <option value="" disabled selected>SESSION</option>
        <option value="MORNING">MORNING</option>
        <option value="EVENING">EVENING</option>
      </select>
      <input type="date" id="flightDate" onchange="saveDataLocally()">
      
      <!-- NEW: A/C REG Input -->
      <div class="input-group-row">
          <input type="text" id="acReg" placeholder="A/C REG (e.g. AJE)" oninput="handleRegInput()" maxlength="3">
      </div>
      
      <!-- NEW: Crew Configuration -->
      <select id="crewConf" onchange="calculateEZFW(); this.className='has-value'">
        <option value="" disabled selected>CREW CONF</option>
      </select>

      <div class="input-with-prefix">
        <span>BS-</span>
        <input type="text" id="fltNo" placeholder="FLIGHT NO" inputmode="numeric" oninput="handleFlightNoInput()">
      </div>
       <select id="from" onchange="updateTotalBaggageWeight(); this.className='has-value'">
        <option value="" disabled selected>FROM</option>
        <option>DAC</option><option>CGP</option><option>CXB</option><option>CCU</option>
        <option>DXB</option><option>AUH</option><option>SHJ</option>
        <option>RUH</option><option>JED</option><option>KUL</option><option>MLE</option>
        <option>SIN</option><option>BKK</option><option>CAN</option><option>MAA</option>
        <option>DOH</option><option>MCT</option>
      </select>
      <select id="destination" onchange="updateTotalBaggageWeight(); this.className='has-value'">
        <option value="" disabled selected>DESTINATION</option>
        <option>DAC</option><option>CGP</option><option>CXB</option><option>CCU</option>
        <option>DXB</option><option>AUH</option><option>SHJ</option>
        <option>RUH</option><option>JED</option><option>KUL</option><option>MLE</option>
        <option>SIN</option><option>BKK</option><option>CAN</option><option>MAA</option>
        <option>DOH</option><option>MCT</option>
      </select>
    </div>

    <div class="grid mid-grid">
      <div class="input-group">
        <label for="adult">ADULT</label>
        <input type="number" id="adult" placeholder="0" oninput="updatePaxAndCalc()">
      </div>
      <div class="input-group">
        <label for="child">CHILD</label>
        <input type="number" id="child" placeholder="0" oninput="updatePaxAndCalc()">
      </div>
      <div class="input-group">
        <label for="infant">INFANT</label>
        <input type="number" id="infant" placeholder="0" oninput="updatePaxAndCalc()">
      </div>
      <div class="input-group">
        <label for="totalPax">TOTAL PAX</label>
        <input type="number" id="totalPax" readonly style="background-color: #e0e0e0; font-weight: bold;">
      </div>
      
      <div class="input-group">
        <label for="bag">TOTAL BAG</label>
        <input type="number" id="bag" oninput="calculateEZFW()">
      </div>
      <div class="input-group">
        <label for="cgo">CARGO</label>
        <input type="number" id="cgo" oninput="calculateEZFW()">
      </div>

      <!-- Airbus Specific Inputs (Hidden for Boeing/ATR) -->
      <div class="input-group airbus-field" style="display: none;">
        <label for="uld">ULD (x68)</label>
        <input type="number" id="uld" placeholder="0" oninput="calculateEZFW()">
      </div>
      <div class="input-group airbus-field" style="display: none;">
        <label for="pmc">PMC (x97)</label>
        <input type="number" id="pmc" placeholder="0" oninput="calculateEZFW()">
      </div>
    </div>

    <div class="grid bottom-grid">
      <div class="input-group ezfw-group">
        <label for="ezfw">EZFW (AUTO)</label>
        <input type="text" id="ezfw" readonly>
      </div>
      <button onclick="addRow()" id="addBtn" class="add-btn">ADD</button>
    </div>
    
    <div class="actions">
      <button onclick="goBack()">PREVIOUS</button>
      <button onclick="downloadTable()">DOWNLOAD PDF</button>
      <button onclick="downloadJPG()">DOWNLOAD JPG</button>
      <button id="newReportBtn" onclick="newReport()">NEW REPORT</button>
    </div>

    <div class="table-responsive">
      <table id="resultTable">
        <thead>
          <tr>
            <th>EDIT</th>
            <th>REG</th> <!-- Changed from A/C to REG -->
            <th>FLT NO</th>
            <th>ORG</th>
            <th>DES</th>
            <th>ADT</th>
            <th>CHD</th>
            <th>INF</th>
            <th>BAG</th>
            <th>CGO</th>
            <th class="airbus-col">ULD</th>
            <th class="airbus-col">PMC</th>
            <th>EZFW</th>
            <th>STATUS</th>
            <th>ACTION</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </div>

  <!-- Link to External JavaScript -->
  <script src="script.js"></script>
</body>
</html>